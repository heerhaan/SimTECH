<MudPaper Elevation="15" Class="pa-4 mud-height-full">
    <MudPaper MinHeight="60px">
        <MudText Typo="Typo.h5">Drivers</MudText>
        <MudDivider Class="my-1" />
    </MudPaper>
    <MudTable T="StandingDriverModel" Items="@StandingDrivers" Dense="true">
        <HeaderContent>
            <MudTh Class="number-col"></MudTh>
            <MudTh Class="accent-cell"></MudTh>
            <MudTh Style="max-width: 220px">Name</MudTh>
            <MudTh Class="number-col">NO</MudTh>
            <MudTh>
                <MudTableSortLabel SortBy="@_pointsSorter">PTS</MudTableSortLabel>
            </MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd Class="number-col">
                <DriverPosition Number="@context.Position" Colour="@context.Colour" Accent="@context.Accent" />
            </MudTd>
            <MudTd Class="accent-cell">
                <SmolAccent Colour="@context.Colour" />
            </MudTd>
            <MudTd Class="overflow-hider">
                <MudStack Row="true" Spacing="1" AlignItems="AlignItems.Center">
                    <MudText Class="overflow-hider" Style="@(context.Mark ? "text-decoration: underline" : "")">@context.Name</MudText>
                    <MudSpacer></MudSpacer>
                    <CountryFlag Code="@context.Nationality" Size="ElementSize.Small" />
                </MudStack>
            </MudTd>
            <MudTd Class="number-col">
                <NumberDisplay Colour="@context.Colour" Accent="@context.Accent">@context.Number</NumberDisplay>
            </MudTd>
            <MudTd>
                <MudText Typo="Typo.caption">@context.Points</MudText>
            </MudTd>
        </RowTemplate>
    </MudTable>
</MudPaper>

@code {
    [Parameter] public IEnumerable<StandingDriverModel> StandingDrivers { get; set; } = Enumerable.Empty<StandingDriverModel>();

    private Func<StandingDriverModel, object> _pointsSorter => e => e.Points;
}
