@page "/climates"
@inject IDialogService DialogService

<MudContainer>
    <MudDataGrid T="Climate" Items="ClimateData">
        <ToolBarContent>
            <MudText Typo="Typo.h4">Climate</MudText>
            <MudSpacer />
            <MudButton Variant="Variant.Outlined" Color="Color.Tertiary" OnClick="AddItem">New</MudButton>
        </ToolBarContent>
        <Columns>
            <PropertyColumn Property="e => e.Terminology" />
            <TemplateColumn Sortable="false">
                <CellTemplate>
                    <MudButtonGroup>
                        <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.Edit" OnClick="@(async () => await UpdateItem(context.Item))" />
                    </MudButtonGroup>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
            <MudDataGridPager T="Tyre" />
        </PagerContent>
    </MudDataGrid>
</MudContainer>

@code {
    List<Climate> ClimateData = new();

    async Task AddItem() => await UpdateItem(null);
    async Task UpdateItem(Climate? climate)
    {
        var parameters = new DialogParameters
            {
                ["Climate"] = climate,
            };

        var dialog = await DialogService.ShowAsync<ClimateEditor>("Modify climate", parameters);
        var result = await dialog.Result;

        if (!result.Canceled && result.Data != null && result.Data is Climate updatedItem)
        {
        }
    }
}
