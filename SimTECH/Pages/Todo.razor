@page "/todo"

<h3>Todo (@todos.Count(e => !e.IsDone))</h3>

<ul>
    @foreach (var todo in todos)
    {
        <li>
            @todo.Title
        </li>
    }
</ul>

<input @bind="newTodo" @bind:event="oninput" placeholder="todo... but what?" />
<input @bind="dueData" @bind:format="yyyy-MM-dd" placeholder="Due for date" />
<button @onclick="AddTodo">Store</button>

@if (!string.IsNullOrEmpty(newTodo))
{
    <p>@newTodo due: @dueData?.ToShortDateString()</p>
}

@code {
    private List<TodoItem> todos = new();
    private string newTodo = string.Empty;
    private DateTime? dueData = null;

    private void AddTodo()
    {
        if (string.IsNullOrEmpty(newTodo)) { return; }

        todos.Add(new TodoItem { Title = newTodo });
        newTodo = string.Empty;
    }
}
